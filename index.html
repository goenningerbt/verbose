<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta charset="utf-8"/> <title>Verbose</title> <meta name="viewport" content="width=device-width"/> <meta name="description" content="A logging framework using the piping library."/> <meta name="author" content="Nicolas Hafner &lt;shinmera@tymoon.eu&gt;"/> <style type="text/css"> body{
          max-width: 1024px;
          margin: 0 auto 0 auto;
          font-family: sans-serif;
          color: #333333;
          font-size: 14pt;
          padding: 5px;
      }

      body>header{
          display:flex;
          align-items: center;
          justify-content: center;
          flex-direction: column;
          max-width: 100%;
      }

      img{
          max-width: 100%;
          max-height: 100%;
      }

      code{
          font-family: Consolas, Inconsolata, monospace;
      }

      a{
          text-decoration: none;
          color: #0055AA;
      }

      #documentation{
          text-align: justify;
      }

      #documentation pre{
          margin-left: 20px;
          overflow: auto;
      }

      #symbol-index>ul{
          list-style: none;
          padding: 0;
      }
      #symbol-index .package>ul{
          list-style: none;
          padding: 0 0 0 10px;
      }
      #symbol-index .package .nicknames{
          font-weight: normal;
      }
      #symbol-index .package h4{
          display: inline-block;
          margin: 0;
      }
      #symbol-index .package article{
          margin: 0 0 15px 0;
      }
      #symbol-index .package article header{
          font-size: 1.2em;
          font-weight: normal;
      }
      #symbol-index .package .name{
          margin-right: 5px;
      }
      #symbol-index .package .docstring{
          margin: 0 0 0 15px;
          white-space: pre-wrap;
          font-size: 12pt;
      }

      @media (max-width: 800px){
          body{font-size: 12pt;}
      } </style> </head> <body> <header> <h1><img alt="verbose" src="verbose-logo.png"/></h1> <span class="version">1.2.0</span> <p class="description">A logging framework using the piping library.</p> </header> <main> <article id="documentation">  <div><h2>How To</h2> <p>Load Verbose with ASDF or Quicklisp.</p> <pre><code>(ql:quickload :verbose)
</code></pre> <p>By default --if threading is available-- a new logging thread is already started and set up with a REPL-Faucet on the INFO level, that simply prints log messages from the INFO level and above to the standard output:</p> <pre><code>(<a href="#VERBOSE:INFO">v:info</a> :test &quot;Hello world!&quot;)
=&gt; LOG: 2014-04-01 13:32:49 [INFO ] &lt;TEST&gt;: Hello world!
</code></pre> <p>Each logging statement expects a category and a datum. The simplest case for a datum is a format string:</p> <pre><code>(<a href="#VERBOSE:INFO">v:info</a> :test &quot;2+2=~f&quot; (<a href="http://l1sp.org/cl/+">+</a> 2 2))
=&gt; LOG: 2014-04-01 13:33:20 [INFO ] &lt;TEST&gt;: 2+2=4.0
</code></pre> <p>However, you can also pass in different objects, as well as extend the behaviour by adding methods to <code><a href="#VERBOSE:LOG">log</a></code>:</p> <pre><code>(<a href="#VERBOSE:INFO">v:info</a> :test (<a href="http://l1sp.org/cl/make-condition">make-condition</a> 'error))
(<a href="#VERBOSE:INFO">v:info</a> :test 'simple-error :format-control &quot;Hey!&quot;)
(<a href="#VERBOSE:INFO">v:info</a> :test #'bt:current-thread)
</code></pre> <p>You can change the logging level of the REPL-Faucet easily. The available levels by default are <code>:FATAL</code> <code>:SEVERE</code> <code>:ERROR</code> <code>:WARN</code> <code>:INFO</code> <code>:DEBUG</code> <code>:TRACE</code>.</p> <pre><code>(<a href="http://l1sp.org/cl/setf">setf</a> (<a href="#VERBOSE:REPL-LEVEL">v:repl-level</a>) :DEBUG)
</code></pre> <p>Using the category-tree-filter you can limit what kinds of categories are shown:</p> <pre><code>(<a href="#VERBOSE:ADD-REPL-CATEGORY">v:add-repl-category</a> :foo.bar.*)
(<a href="#VERBOSE:INFO">v:info</a> :foo &quot;Foo&quot;)

(<a href="#VERBOSE:INFO">v:info</a> :foo.bar.stuff &quot;Foo&quot;)
=&gt; LOG: 2014-04-01 13:51:03 [INFO ] &lt;FOO.BAR.STUFF&gt;: Foo
</code></pre> <p>Verbose also allows you to pass as many categories as you want. This permits to use the categories as a form of tag, rather than a hierarchy.</p> <pre><code>(<a href="#VERBOSE:INFO">v:info</a> '(:system :server) &quot;Starting up!&quot;)
=&gt; LOG: 2014-04-01 13:51:52 [INFO ] &lt;SYSTEM&gt;&lt;SERVER&gt;: Starting up!
</code></pre> <p>Log message passing through the pipeline happens in a separate thread. If you create new pipe segments for your logging pipeline that need to access some form of shared variable, you can use <code><a href="#VERBOSE:SHARE">share</a></code>, which is SETFable. One <code><a href="#VERBOSE:SHARE">share</a></code> that is most likely of interest to everyone is saved under the symbol <code><a href="http://l1sp.org/cl/*standard-output*">*standard-output*</a></code>. Setting this anew is useful if you start a new REPL session and need to redirect logging to it.</p> <pre><code>(<a href="http://l1sp.org/cl/setf">setf</a> (<a href="#VERBOSE:SHARED-INSTANCE">v:shared-instance</a> '*standard-output*) *standard-output*)
</code></pre> <p>Since this is a very frequent thing to do, especially when hooking into remote lisps, you can achieve the same as above by using <code><a href="#VERBOSE:OUTPUT-HERE">output-here</a></code>.</p> <p>On the other hand, you can also suppress output completely or of certain categories using <code><a href="#VERBOSE:WITH-MUFFLED-LOGGING">with-muffled-logging</a></code>.</p> <pre><code>(<a href="#VERBOSE:WITH-MUFFLED-LOGGING">v:with-muffled-logging</a> (:test :something.or.other)
  (<a href="#VERBOSE:INFO">v:info</a> :test &quot;A&quot;)
  (<a href="#VERBOSE:INFO">v:info</a> :something.else &quot;B&quot;)
  (<a href="#VERBOSE:INFO">v:info</a> :something.or.other &quot;C&quot;))
=&gt; LOG: 2015-03-03 17:36:41 [INFO ] &lt;SOMETHING.ELSE&gt;: B
</code></pre> <p>The <code><a href="#VERBOSE:WITH-MUFFLED-LOGGING">with-muffled-logging</a></code> macro rebinds the <code><a href="#VERBOSE:*MUFFLED-CATEGORIES*">*muffled-categories*</a></code> by prepending the given categories. You can of course also set <code><a href="#VERBOSE:*MUFFLED-CATEGORIES*">*muffled-categories*</a></code> directly to achieve a global muffling. If you don't pass anything to <code><a href="#VERBOSE:WITH-MUFFLED-LOGGING">with-muffled-logging</a></code> or push <code>T</code> onto <code><a href="#VERBOSE:*MUFFLED-CATEGORIES*">*muffled-categories*</a></code>, all messages will be suppressed.</p> <p>If you want to log to a file, you can either create your own custom file faucet, or use a preset one like the rotating-log-faucet:</p> <pre><code>(<a href="#VERBOSE:ADD-PIPE">v:add-pipe</a> (<a href="http://l1sp.org/cl/make-instance">make-instance</a> 'v:rotating-log-faucet :file #p&quot;~/verbose.log&quot; :interval (<a href="#VERBOSE:MAKE-CRON-INTERVAL">v:make-cron-interval</a> &quot;* * * * *&quot;)))
</code></pre> <p>Which creates a faucet that logs to a file with &quot;verbose.log&quot; suffix in your home directory, rotating every minute as per the CRON interval. In case you want to filter the message to a certain level or category instead, you can precede it by a filter:</p> <pre><code>(<a href="#VERBOSE:ADD-PIPE">v:add-pipe</a> (<a href="http://l1sp.org/cl/make-instance">make-instance</a> 'piping:predicate-filter :predicate #'(<a href="http://l1sp.org/cl/lambda">lambda</a> (<a href="#VERBOSE:MESSAGE">message</a>) (<a href="#VERBOSE:MESSAGE-VISIBLE">message-visible</a> message :WARN)))
            (<a href="http://l1sp.org/cl/make-instance">make-instance</a> 'v:rotating-log-faucet :file #p&quot;~/verbose.log&quot; :interval (<a href="#VERBOSE:MAKE-CRON-INTERVAL">v:make-cron-interval</a> &quot;* * * * *&quot;)))
</code></pre> <p>Using the piping constructs you can create complex logging systems or even change the pipeline on the fly. When you do, be aware that since the message passing happens in a separate thread, you need to acquire access to the pipeline first before modifying it:</p> <pre><code>(<a href="#VERBOSE:WITH-CONTROLLER-LOCK">v:with-controller-lock</a> ()
(piping:pipeline v:*global-controller*))
</code></pre> <p>See the documentation of  for more information.</p> <h2>Also See</h2> <ul> <li><a href="http://shinmera.github.io/piping/">Piping</a> Dynamic pipelines</li> <li><a href="http://shinmera.github.io/dissect/">Dissect</a> Conditions and stack-frame analysis</li> </ul> </div>  </article> <article id="copyright">  <h2>Copyright</h2> <span>verbose</span> is licensed under the <span><a href="https://tldrlegal.com/search?q=Artistic">Artistic</a></span> license.  Â© <span>Nicolas Hafner &lt;shinmera@tymoon.eu&gt;</span> .  This library can be obtained on <a href="https://github.com/Shinmera/verbose">https://github.com/Shinmera/verbose</a>.  </article>  <article id="symbol-index"> <h2>Package Index</h2> <ul><li class="package"> <h3> <a name="VERBOSE" href="#VERBOSE">VERBOSE</a> <span class="nicknames">(ORG.SHIRAKUMO.VERBOSE V)</span> </h3> <ul><li> <a name="VERBOSE:*GLOBAL-CONTROLLER*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#VERBOSE:*GLOBAL-CONTROLLER*">*GLOBAL-CONTROLLER*</a></code></h4>  </header> <pre class="docstring">Global variable holding the current verbose controller instance and pipeline.</pre> </article> </li><li> <a name="VERBOSE:*LEVELS*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#VERBOSE:*LEVELS*">*LEVELS*</a></code></h4>  </header> <pre class="docstring">List of accepted logging level names. The position in the list defines its level, ranking from finest to roughest.</pre> </article> </li><li> <a name="VERBOSE:*MUFFLED-CATEGORIES*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#VERBOSE:*MUFFLED-CATEGORIES*">*MUFFLED-CATEGORIES*</a></code></h4>  </header> <pre class="docstring">Which categories of messages that are handed to PASS to muffle (not put onto the pipeline).</pre> </article> </li><li> <a name="VERBOSE:*PROCESS-LOCALLY*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#VERBOSE:*PROCESS-LOCALLY*">*PROCESS-LOCALLY*</a></code></h4>  </header> <pre class="docstring">Whether to process messages in the local thread rather than the controller thread.</pre> </article> </li><li> <a name="VERBOSE:*REPL-FAUCET-TIMESTAMP*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#VERBOSE:*REPL-FAUCET-TIMESTAMP*">*REPL-FAUCET-TIMESTAMP*</a></code></h4>  </header> <pre class="docstring">Default timestamp format of the repl faucet. See LOCAL-TIME:FORMAT-TIMESTRING.</pre> </article> </li><li> <a name="VERBOSE:*VERBOSE-CONDITIONS*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#VERBOSE:*VERBOSE-CONDITIONS*">*VERBOSE-CONDITIONS*</a></code></h4>  </header> <pre class="docstring">Wether to report conditions verbosely using DISSECT:PRESENT.</pre> </article> </li><li> <a name="VERBOSE:CATEGORY-FILTER"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#VERBOSE:CATEGORY-FILTER">CATEGORY-FILTER</a></code></h4>  </header> <pre class="docstring">A simple pipe filter that only lets through matching categories.</pre> </article> </li><li> <a name="VERBOSE:CATEGORY-TREE-FILTER"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#VERBOSE:CATEGORY-TREE-FILTER">CATEGORY-TREE-FILTER</a></code></h4>  </header> <pre class="docstring">A pipe filter that only lets messages through whose category matches by tree.</pre> </article> </li><li> <a name="VERBOSE:CONDITION-MESSAGE"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#VERBOSE:CONDITION-MESSAGE">CONDITION-MESSAGE</a></code></h4>  </header> <pre class="docstring">Message object that carries a condition object.</pre> </article> </li><li> <a name="VERBOSE:CONTROLLER"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#VERBOSE:CONTROLLER">CONTROLLER</a></code></h4>  </header> <pre class="docstring">Main controller class that holds the logging pipeline, thread and shares.</pre> </article> </li><li> <a name="VERBOSE:FILE-FAUCET"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#VERBOSE:FILE-FAUCET">FILE-FAUCET</a></code></h4>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:LEVEL-FILTER"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#VERBOSE:LEVEL-FILTER">LEVEL-FILTER</a></code></h4>  </header> <pre class="docstring">A simple pipe filter that only lets through messages that are above a certain level.</pre> </article> </li><li> <a name="VERBOSE:MESSAGE"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#VERBOSE:MESSAGE">MESSAGE</a></code></h4>  </header> <pre class="docstring">Message object to be passed around the system.</pre> </article> </li><li> <a name="VERBOSE:REPL-FAUCET"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#VERBOSE:REPL-FAUCET">REPL-FAUCET</a></code></h4>  </header> <pre class="docstring">A simple logging faucet that prints log messages to the *standard-output*</pre> </article> </li><li> <a name="VERBOSE:ROTATING-LOG-FAUCET"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#VERBOSE:ROTATING-LOG-FAUCET">ROTATING-LOG-FAUCET</a></code></h4>  </header> <pre class="docstring">A file logger that rotates at the given (cron) interval.</pre> </article> </li><li> <a name="VERBOSE:CATEGORIES"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:CATEGORIES">CATEGORIES</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:FAUCET-FILE"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:FAUCET-FILE">FAUCET-FILE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:INTERVAL"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:INTERVAL">INTERVAL</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:MESSAGE-CATEGORIES"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:MESSAGE-CATEGORIES">MESSAGE-CATEGORIES</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:MESSAGE-CONDITION"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:MESSAGE-CONDITION">MESSAGE-CONDITION</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:MESSAGE-CONTENT"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:MESSAGE-CONTENT">MESSAGE-CONTENT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:MESSAGE-LEVEL"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:MESSAGE-LEVEL">MESSAGE-LEVEL</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:MESSAGE-THREAD"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:MESSAGE-THREAD">MESSAGE-THREAD</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:MESSAGE-TIME"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:MESSAGE-TIME">MESSAGE-TIME</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:REPL-CATEGORIES"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:REPL-CATEGORIES">REPL-CATEGORIES</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <pre class="docstring">Returns the list of allowed log categories of the standard category-tree-filter.
If NIL is returned, anything is passed.</pre> </article> </li><li> <a name="VERBOSE:REPL-LEVEL"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:REPL-LEVEL">REPL-LEVEL</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <pre class="docstring">Returns the current logging level of the standard repl faucet.</pre> </article> </li><li> <a name="VERBOSE:SHARE"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:SHARE">SHARE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">NAME &amp;OPTIONAL (CONTROLLER *GLOBAL-CONTROLLER*)</code><code>)</code>  </header> <pre class="docstring">Return the value of a shared special variable.

Shared bindings are special variable bindings that are active during the message
passing in the controller's logging thread. This allows you to influence various
behaviours of the pipeline, such as where and how the messages are printed.

This is thread-safe.</pre> </article> </li><li> <a name="VERBOSE:SHARED-INSTANCE"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:SHARED-INSTANCE">SHARED-INSTANCE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">NAME &amp;OPTIONAL (CONTROLLER *GLOBAL-CONTROLLER*)</code><code>)</code>  </header> <pre class="docstring">Return the value of a shared special variable.

Shared bindings are special variable bindings that are active during the message
passing in the controller's logging thread. This allows you to influence various
behaviours of the pipeline, such as where and how the messages are printed.

This is thread-safe.</pre> </article> </li><li> <a name="VERBOSE:TIME-FORMAT"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:TIME-FORMAT">TIME-FORMAT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:ADD-PIPE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:ADD-PIPE">ADD-PIPE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST SEGMENTS</code><code>)</code>  </header> <pre class="docstring">Add a new pipe with the given segments.</pre> </article> </li><li> <a name="VERBOSE:ADD-REPL-CATEGORY"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:ADD-REPL-CATEGORY">ADD-REPL-CATEGORY</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST CATEGORY</code><code>)</code>  </header> <pre class="docstring">Add a new repl category to allow.</pre> </article> </li><li> <a name="VERBOSE:DEBUG"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:DEBUG">DEBUG</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CATEGORIES FORMAT-STRING &amp;REST FORMAT-ARGS</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:ERROR"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:ERROR">ERROR</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CATEGORIES FORMAT-STRING &amp;REST FORMAT-ARGS</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:FATAL"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:FATAL">FATAL</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CATEGORIES FORMAT-STRING &amp;REST FORMAT-ARGS</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:INFO"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:INFO">INFO</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CATEGORIES FORMAT-STRING &amp;REST FORMAT-ARGS</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:LOG-CONDITION"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:LOG-CONDITION">LOG-CONDITION</a></code></h4> <code class="qualifiers"></code> <code class="arguments">LEVEL CATEGORIES CONDITION</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:LOG-MESSAGE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:LOG-MESSAGE">LOG-MESSAGE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">LEVEL CATEGORIES CONTENT &amp;OPTIONAL (CLASS 'MESSAGE) &amp;REST INITARGS</code><code>)</code>  </header> <pre class="docstring">Logs a message with the given parameters.</pre> </article> </li><li> <a name="VERBOSE:LOG-OBJECT"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:LOG-OBJECT">LOG-OBJECT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring">Shorthand for (pass *global-controller* object)</pre> </article> </li><li> <a name="VERBOSE:MAKE-CRON-INTERVAL"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:MAKE-CRON-INTERVAL">MAKE-CRON-INTERVAL</a></code></h4> <code class="qualifiers"></code> <code class="arguments">STRING</code><code>)</code>  </header> <pre class="docstring">Parse a cron interval.</pre> </article> </li><li> <a name="VERBOSE:MAKE-STANDARD-GLOBAL-CONTROLLER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:MAKE-STANDARD-GLOBAL-CONTROLLER">MAKE-STANDARD-GLOBAL-CONTROLLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <pre class="docstring">Creates a new standard global controller construct with a setup pipeline.</pre> </article> </li><li> <a name="VERBOSE:OUTPUT-HERE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:OUTPUT-HERE">OUTPUT-HERE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;OPTIONAL (STANDARD-OUTPUT *STANDARD-OUTPUT*)</code><code>)</code>  </header> <pre class="docstring">Set the *standard-output* shared instance to STANDARD-OUTPUT, effectively
redirecting output from the logger thread to the specified stream.</pre> </article> </li><li> <a name="VERBOSE:REMOVE-GLOBAL-CONTROLLER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:REMOVE-GLOBAL-CONTROLLER">REMOVE-GLOBAL-CONTROLLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <pre class="docstring">Attempts to destroy the thread of the controller and remove it.</pre> </article> </li><li> <a name="VERBOSE:REMOVE-REPL-CATEGORY"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:REMOVE-REPL-CATEGORY">REMOVE-REPL-CATEGORY</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST CATEGORY</code><code>)</code>  </header> <pre class="docstring">Remove an existing repl category.</pre> </article> </li><li> <a name="VERBOSE:RESTART-GLOBAL-CONTROLLER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:RESTART-GLOBAL-CONTROLLER">RESTART-GLOBAL-CONTROLLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <pre class="docstring">Removes the controller and creates a new one in its place.</pre> </article> </li><li> <a name="VERBOSE:SET-STANDARD-SPECIAL-VALUES"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:SET-STANDARD-SPECIAL-VALUES">SET-STANDARD-SPECIAL-VALUES</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CONTROLLER</code><code>)</code>  </header> <pre class="docstring">Set all standard special values from CL as shared bindings.

See COPY-BINDINGS.</pre> </article> </li><li> <a name="VERBOSE:SEVERE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:SEVERE">SEVERE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CATEGORIES FORMAT-STRING &amp;REST FORMAT-ARGS</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:START-CONTROLLER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:START-CONTROLLER">START-CONTROLLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;OPTIONAL (CONTROLLER *GLOBAL-CONTROLLER*)</code><code>)</code>  </header> <pre class="docstring">Starts the controller's thread.</pre> </article> </li><li> <a name="VERBOSE:STOP-CONTROLLER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:STOP-CONTROLLER">STOP-CONTROLLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;OPTIONAL (CONTROLLER *GLOBAL-CONTROLLER*)</code><code>)</code>  </header> <pre class="docstring">Stops the controller's thread.</pre> </article> </li><li> <a name="VERBOSE:SYNC"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:SYNC">SYNC</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;OPTIONAL (CONTROLLER *GLOBAL-CONTROLLER*)</code><code>)</code>  </header> <pre class="docstring">Causes a sync message to be sent to the controller thread (if present).
This will only return once the sync message has been processed by the controller thread.
You can use this in order to ensure that the logging messages you've sent out before
calling sync have been processed.</pre> </article> </li><li> <a name="VERBOSE:TRACE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:TRACE">TRACE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CATEGORIES FORMAT-STRING &amp;REST FORMAT-ARGS</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:WARN"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:WARN">WARN</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CATEGORIES FORMAT-STRING &amp;REST FORMAT-ARGS</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:FORMAT-MESSAGE"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:FORMAT-MESSAGE">FORMAT-MESSAGE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">FAUCET MESSAGE</code><code>)</code>  </header> <pre class="docstring">Wrapper around pass to potentially be overwritten if the output format should be changed.
This serves a dual purpose: First it allows writers of faucets to customise
their output representation. Secondly, it coerces the actual message content
into a string to output.

By default, the following methods are defined:
(REPL-FAUCET MESSAGE) print to the repl, using (NIL content) to coerce the content.
(STREAM MESSAGE)
(NIL CONDITION)       if *VERBOSE-CONDITIONS* is T, (DISSECT:PRESENT message) is
                      used as the output. Otherwise, the message itself is returned
                      directly.
(NIL FUNCTION)        call the message function and return its result.
(NIL T)               simply return the message.</pre> </article> </li><li> <a name="VERBOSE:LOG"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:LOG">LOG</a></code></h4> <code class="qualifiers"></code> <code class="arguments">LEVEL CATEGORIES DATUM &amp;REST DATUM-ARGS</code><code>)</code>  </header> <pre class="docstring">Logs a new message under given level and categories, using the datum and datum-args to construct the content.

The following datum classes are recognised by default:
STRING     -- Construct the content through FORMAT with datum and datum-args.
SYMBOL     -- If datum names a condition class, MAKE-CONDITION is called with
              the datum and datum-args. Otherwise MAKE-INSTANCE is used. LOG
              is subsequently called /again/ with the resulting instance as
              the new datum. This ensures that dispatching happens as usual.
FUNCTION   -- Use a (lambda () (apply datum datum-args)) as the content.
              By default this means that the given function will be called
              within the controller thread. See FORMAT-MESSAGE. Be aware
              that this means the function will be executed at least once
              for each faucet, and potentially arbitrary times to perform
              the pipelinging.
T          -- Discard the datum-args and use datum directly as content.</pre> </article> </li><li> <a name="VERBOSE:MESSAGE-CATEGORY"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:MESSAGE-CATEGORY">MESSAGE-CATEGORY</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MESSAGE</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="VERBOSE:MESSAGE-VISIBLE"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:MESSAGE-VISIBLE">MESSAGE-VISIBLE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MESSAGE LEVEL</code><code>)</code>  </header> <pre class="docstring">Returns T if the message is visible under the given level.</pre> </article> </li><li> <a name="VERBOSE:PASS"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:PASS">PASS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">SEGMENT MESSAGE</code><code>)</code>  </header> <pre class="docstring">Pass a message through a segment.

Note for implementors of this method for custom segments:
You are expected to return a message object, which will be
used for subsequent passing down the current segment. If you
return NIL, passing stops. This does not affect passing in
segments on other splitters. Do note that changing the object
itself directly will of course als be reflected at any other
point in the pipeline passing, so muting the passed object
should be avoided wherever possible.

Returns the message.</pre> </article> </li><li> <a name="VERBOSE:ROTATE-LOG"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:ROTATE-LOG">ROTATE-LOG</a></code></h4> <code class="qualifiers"></code> <code class="arguments">ROTATING-LOG-FAUCET</code><code>)</code>  </header> <pre class="docstring">Initiate a log rotation immediately. This does not influence the automatic rotation interval.</pre> </article> </li><li> <a name="VERBOSE:STOP-ROTATION"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:STOP-ROTATION">STOP-ROTATION</a></code></h4> <code class="qualifiers"></code> <code class="arguments">ROTATING-LOG-FAUCET</code><code>)</code>  </header> <pre class="docstring">Stops the rotation. Logging will still continue on the current file.</pre> </article> </li><li> <a name="VERBOSE:UPDATE-INTERVAL"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:UPDATE-INTERVAL">UPDATE-INTERVAL</a></code></h4> <code class="qualifiers"></code> <code class="arguments">ROTATING-LOG-FAUCET &amp;OPTIONAL</code><code>)</code>  </header> <pre class="docstring">Change the rotation interval. cron-interval should either be a cron-parsable string or a clon:cron-schedule.</pre> </article> </li><li> <a name="VERBOSE:COPY-BINDINGS"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:COPY-BINDINGS">COPY-BINDINGS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Copy all the values of VARIABLEs over to shared bindings in the CONTROLLER.

See (SETF SHARE).</pre> </article> </li><li> <a name="VERBOSE:WITH-CONTROLLER-LOCK"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:WITH-CONTROLLER-LOCK">WITH-CONTROLLER-LOCK</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Wraps the body into an environment with the thread lock for the controller acquired so it is safe to modify the pipeline or controller slots.</pre> </article> </li><li> <a name="VERBOSE:WITH-MUFFLED-LOGGING"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:WITH-MUFFLED-LOGGING">WITH-MUFFLED-LOGGING</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Muffles all messages of CATEGORY within BODY.
This means that all logging statements that fit CATEGORY within the BODY
are not actually ever handed to the pipeline. If CATEGORY is T, all
messages are muffled.</pre> </article> </li><li> <a name="VERBOSE:WITH-SHARES"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#VERBOSE:WITH-SHARES">WITH-SHARES</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Binds all shared special variables of CONTROLLER within BODY.

See SHARE.</pre> </article> </li></ul> </li></ul> </article>  </main> </body> </html> 